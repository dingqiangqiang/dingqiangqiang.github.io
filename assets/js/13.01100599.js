(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{448:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("code",[s._v("Axios")]),s._v(" 是一个基于 "),a("code",[s._v("promise")]),s._v(" 的网络请求库，可以用于浏览器和 node.js。在服务端它使用原生 node.js "),a("code",[s._v("http")]),s._v(" 模块, 而在客户端 (浏览端) 则使用 "),a("code",[s._v("XMLHttpRequest")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[s._v("#")]),s._v(" 特性")]),s._v(" "),a("ul",[a("li",[s._v("在浏览器端使用 XMLHttpRequest 对象通讯")]),s._v(" "),a("li",[s._v("从 node.js 创建 http 请求")]),s._v(" "),a("li",[s._v("支持 Promise API")]),s._v(" "),a("li",[s._v("支持请求和响应的拦截器")]),s._v(" "),a("li",[s._v("支持请求数据和响应数据的转换")]),s._v(" "),a("li",[s._v("支持请求的取消")]),s._v(" "),a("li",[s._v("JSON 数据的自动转换")]),s._v(" "),a("li",[s._v("客户端防止 XSRF")])]),s._v(" "),a("h2",{attrs:{id:"源码目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码目录"}},[s._v("#")]),s._v(" 源码目录")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("注意")]),a("ul",[a("li",[s._v("本次分析的版本号为: 0.19.2")]),s._v(" "),a("li",[s._v("只会分析浏览器端 axios 的实现")])])]),a("p",[s._v("Axios.js 的源码都在 lib 目录下，其目录结构如下。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib\n├── adapters        # 请求相关\n├── core            # 核心代码 \n├── cancel          # 请求取消\n├── helpers         # 辅助函数\n├── axios.js        # 入口\n├── defaults.js     # 默认配置\n├── utils.js        # 工具函数\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"adapters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adapters"}},[s._v("#")]),s._v(" adapters")]),s._v(" "),a("p",[s._v("adapters 目录包含不同平台的请求方式，浏览器环境下会引用xhr.js，node 环境会引用http.js。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("adapters\n├── xhr.js        # 浏览器\n├── http.js       # node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core"}},[s._v("#")]),s._v(" core")]),s._v(" "),a("p",[s._v("core 目录包含了 Axios.js 的核心代码，包括Axios类、拦截器管理类、配置合并、请求发送核心流程、请求响应数据转换、错误处理等。\n这里的代码可谓是 Axios.js 的灵魂，也是我们之后需要重点分析的地方。")]),s._v(" "),a("h3",{attrs:{id:"cancel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cancel"}},[s._v("#")]),s._v(" cancel")]),s._v(" "),a("p",[s._v("cancel 主要是包含了请求取消的代码。有些场景下，我们希望能主动取消请求，cancel 就是来做这部分工作的。")]),s._v(" "),a("h3",{attrs:{id:"helpers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#helpers"}},[s._v("#")]),s._v(" helpers")]),s._v(" "),a("p",[s._v("helpers 主要定义了一些辅助函数。")]),s._v(" "),a("h3",{attrs:{id:"axios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#axios"}},[s._v("#")]),s._v(" axios")]),s._v(" "),a("p",[s._v("入口文件，对外暴露了 axios 及其他好用的 api，如 axios.create、axios.cancelToken、axios.all等。")]),s._v(" "),a("h3",{attrs:{id:"defaults"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defaults"}},[s._v("#")]),s._v(" defaults")]),s._v(" "),a("p",[s._v("axios 的默认配置，定义一些默认的行为。当用户传入配置时，会和默认配置做一层合并。")]),s._v(" "),a("h3",{attrs:{id:"utils"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utils"}},[s._v("#")]),s._v(" utils")]),s._v(" "),a("p",[s._v("工具函数")]),s._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("从 Axios.js 的目录设计可以看到，功能模块拆分的非常清楚，相关的逻辑放在一个独立的目录下维护，并且把复用的代码也抽成一个独立目录。")]),s._v(" "),a("p",[s._v("这样的目录设计让代码的阅读性和可维护性都变强，是非常值得学习和推敲的。")])])}),[],!1,null,null,null);a.default=r.exports}}]);